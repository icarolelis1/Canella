{
    "Passes": {
        "Number_of_passes": 3,
        "Renderpass": [
            {
                "Key": "basic",
                "Attachment_count": 4,
                "Subpasses_count": 1,
                "Description": "basic color output",
                "index": 0,
                "Extent": {
                    "Width": -1,
                    "Height": -1
                },
                "Attachments_descriptions": {
                    "0": {
                        "Format": "SWAPCHAIN",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_CLEAR",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_UNDEFINED",
                        "FinalLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "Attachment": 0,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL"
                    },
                    "1": {
                        "Format": "VK_FORMAT_R8G8B8A8_UNORM",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_CLEAR",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_UNDEFINED",
                        "FinalLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "Attachment": 1,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL"

                    },
                    "2": {
                        "Format": "VK_FORMAT_R16G16_SFLOAT",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_CLEAR",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_UNDEFINED",
                        "FinalLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "Attachment": 2,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL"
                    },
                    "3": {
                        "Format": "SUPPORTED_DEPTH",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_CLEAR",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL",
                        "FinalLayout": "VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL",
                        "Attachment": 3,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL"
                    }
                },
                "Subpasses_descriptions": {
                    "Subpasses_count": 1,
                    "0": {
                        "PipelineBindPoint": "VK_PIPELINE_BIND_POINT_GRAPHICS",
                        "ColorAttachmentCount": 3,
                        "HasDepthAttachment" : true,
                        "DepthAttachmentIndex" : 3,
                        "ColorAttachemntIndex": [0,1,2],
                        "SrcSubpass": "VK_SUBPASS_EXTERNAL",
                        "DstSubpass": 0,
                        "SrcStageMask": "VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT",
                        "DstStageMask": "VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT",
                        "SrcAccessMask": "VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT",
                        "DstAccessMask": "VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT"
                    }
                },
                "FrameBufferRessources"  : {
                    "MatchSwapChainTargets" : true,
                    "ResourcesToCreate" :
                    [
                        {
                            "ColorImage" : true,
                            "Format" : "SwapchainFormat",
                            "Id" : "ColorImage",
                            "NumberOfImages" : -1
                        },
                        {
                            "ColorImage" : true,
                            "Format" : "VK_FORMAT_R8G8B8A8_UNORM",
                            "Id" : "Albedos",
                            "NumberOfImages" : -1
                        },
                        {
                            "ColorImage" : true,
                            "Format" : "VK_FORMAT_R16G16_SFLOAT",
                            "Id" : "Normals",
                            "NumberOfImages" : -1
                        },
                        {
                            "ColorImage" : false,
                            "Format" : "SupportedDepth",
                            "Id" : "DepthImage",
                            "NumberOfImages" : -1
                        }
                    ],
                    "StealFrameBuffers" : false,
                    "FrameBufferAttachments" :
                    [
                        {
                            "ColorImage" : true,
                            "Key" : "SwapchainImage",
                            "ResourceIndex" : 0,
                            "GrabResourceFrom" : "Self"
                        },
                        {
                            "ColorImage" : true,
                            "Key" : "Albedos",
                            "ResourceIndex" : 1,
                            "GrabResourceFrom" : "Self"
                        },
                        {
                            "ColorImage" : true,
                            "Key" : "Normals",
                            "ResourceIndex" : 2,
                            "GrabResourceFrom" : "Self"
                        },
                        {
                            "ColorImage" : false,
                            "Key" : "DepthImage",
                            "ResourceIndex" : 3,
                            "GrabResourceFrom" : "Self"
                        }
                    ]
                }
            },
            {
                "Key": "LatePass",
                "Attachment_count": 4,
                "Subpasses_count": 1,
                "Description": "Late pass of occlusion culling",
                "index": 0,
                "Extent": {
                    "Width": -1,
                    "Height": -1
                },
                "Attachments_descriptions": {
                    "0": {
                        "Format": "SWAPCHAIN",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_LOAD",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "FinalLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "Attachment": 0,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL"
                    },
                    "1": {
                        "Format": "VK_FORMAT_R8G8B8A8_UNORM",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_LOAD",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "FinalLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "Attachment": 1,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL"

                    },
                    "2": {
                        "Format": "VK_FORMAT_R16G16_SFLOAT",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_LOAD",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "FinalLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL",
                        "Attachment": 2,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL"
                    },
                    "3": {
                        "Format": "SUPPORTED_DEPTH",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_LOAD",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL",
                        "FinalLayout": "VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL",
                        "Attachment": 3,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL"
                    }
                },
                "Subpasses_descriptions": {
                    "Subpasses_count": 1,
                    "0": {
                        "PipelineBindPoint": "VK_PIPELINE_BIND_POINT_GRAPHICS",
                        "ColorAttachmentCount": 3,
                        "HasDepthAttachment" : true,
                        "DepthAttachmentIndex" : 3,
                        "ColorAttachemntIndex": [
                            0,1,2
                        ],
                        "SrcSubpass": "VK_SUBPASS_EXTERNAL",
                        "DstSubpass": 0,
                        "SrcStageMask": "VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT",
                        "DstStageMask": "VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT",
                        "SrcAccessMask": "VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT",
                        "DstAccessMask": "VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT"
                    }
                },
                "FrameBufferRessources"  : {
                    "MatchSwapChainTargets" : true,
                    "ResourcesToCreate" : [],
                    "StealFrameBuffers" : true,
                    "ExternalFrameBufferAttachments" :"basic",
                    "FrameBufferAttachments" :
                    [
                        {
                            "ColorImage" : true,
                            "Key" : "ColorImage",
                            "ResourceIndex" : 0,
                            "GrabResourceFrom" : "basic"
                        },
                        {
                            "ColorImage" : true,
                            "Key" : "Albedos",
                            "GrabResourceFrom" : "basic",
                            "ResourceIndex" : 1
                        },
                        {
                            "ColorImage" : true,
                            "Key" : "Normals",
                            "GrabResourceFrom" : "basic",
                            "ResourceIndex" : 2
                        },
                        {
                            "ColorImage" : false,
                            "Key" : "DepthImage",
                            "GrabResourceFrom" : "basic",
                            "ResourceIndex" : 3
                        }
                    ]
                }
            },
            {
                "Key": "imgui",
                "Attachment_count": 1,
                "Subpasses_count": 1,
                "Description": "imgui stuff",
                "index": 0,
                "Extent": {
                    "Width": -1,
                    "Height": -1
                },
                "Attachments_descriptions": {
                    "0": {
                        "Format": "SWAPCHAIN",
                        "Samples": "VK_SAMPLE_COUNT_1_BIT",
                        "LoadOp": "VK_ATTACHMENT_LOAD_OP_CLEAR",
                        "StoreOp": "VK_ATTACHMENT_STORE_OP_STORE",
                        "InitialLayout": "VK_IMAGE_LAYOUT_UNDEFINED",
                        "FinalLayout": "VK_IMAGE_LAYOUT_PRESENT_SRC_KHR",
                        "Attachment": 0,
                        "AttachmentLayout": "VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL"
                    }
                },
                "Subpasses_descriptions": {
                    "Subpasses_count": 1,
                    "0": {
                        "PipelineBindPoint": "VK_PIPELINE_BIND_POINT_GRAPHICS",
                        "ColorAttachmentCount": 1,
                        "HasDepthAttachment" : false,
                        "ColorAttachemntIndex": [0],
                        "SrcSubpass": "VK_SUBPASS_EXTERNAL",
                        "DstSubpass": 0,
                        "SrcStageMask": "VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT",
                        "DstStageMask": "VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT",
                        "SrcAccessMask": "VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT",
                        "DstAccessMask": "VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT"
                    }
                },
                "FrameBufferRessources"  : {
                    "MatchSwapChainTargets" : true,
                    "ResourcesToCreate" :
                    [],
                    "StealFrameBuffers" : false,
                    "FrameBufferAttachments" :
                    [
                        {
                            "ColorImage" : true,
                            "Key" : "SwapchainImage",
                            "ResourceIndex" : -1,
                            "GrabResourceFrom" : "StandardOutput"
                        }
                    ]
                }
            }
        ]
    }
}